<div class="container mt-5">
  <h1 class="text-center mb-4 display-5">🏠 Home</h1>
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">🛍️ Productos</h2>
    <button class="btn btn-outline-success position-relative cartButton">
      🛒
    </button>
  </div>

  <div class="alert alert-light text-center">
    {{#if user}}
      <p class="mb-0">¡Hola,
        {{user.name}}!
        <a href="/users/" class="link-info">Ir a tu perfil</a>
      </p>
      <p><a href="/api/sessions/logout">Cerrar sesion</a></p>
      <div>
        {{#if isAdmin}}
          <a href="/realtimeproducts">Admin Panel</a>
        {{/if}}
      </div>
    {{else}}
      <p class="mb-1">¿Ya tienes cuenta?
        <a href="/users/login" class="link-primary">¡Inicia sesión!</a></p>
      <p class="mb-0">¿No tienes cuenta?
        <a href="/users/register" class="link-success">¡Regístrate!</a></p>
    {{/if}}
  </div>

  <div class="row">
    {{#each docs}}
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
          <div
            class="card-body d-flex flex-column justify-content-between text-center"
          >
            <div>
              <h5 class="card-title fw-bold">{{this.title}}</h5>
              <p class="card-text">{{this.description}}</p>
              <p class="text-primary fs-5 fw-bold">${{this.price}}</p>
            </div>
            <div class="mt-3">
              <a
                class="btn btn-outline-secondary me-2"
                href="/products/{{this._id}}"
              >Ver detalles</a>
              <button
                class="btn btn-outline-primary add-cart"
                data-id="{{this._id}}"
              >
                Agregar al carrito
              </button>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>

  <!-- Paginación -->
  <div class="d-flex justify-content-center align-items-center mt-4 mb-5">
    {{#if hasPrevPage}}
      <a href="/?page={{prevPage}}" class="btn btn-outline-primary me-3">◀
        Anterior</a>
    {{/if}}

    <span class="fw-bold">Página {{page}} de {{totalPages}}</span>

    {{#if hasNextPage}}
      <a
        href="/?page={{nextPage}}"
        class="btn btn-outline-primary ms-3"
      >Siguiente ▶</a>
    {{/if}}
  </div>
</div>

<script src="/js/products.js" type="module"></script>